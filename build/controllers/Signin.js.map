{"version":3,"sources":["../../src/controllers/Signin.js"],"names":["signin","db","bcrypt","req","res","body","email","password","select","from","where","then","data","length","compareSync","hash","status","json","user","catch"],"mappings":";;;;;AAAA,IAAMA,SAAS,SAATA,MAAS,CAACC,EAAD,EAAKC,MAAL;AAAA,SAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAAA,oBACfD,IAAIE,IADW;AAAA,QACnCC,KADmC,aACnCA,KADmC;AAAA,QAC5BC,QAD4B,aAC5BA,QAD4B;;AAE3CN,OAAGO,MAAH,CAAU,OAAV,EAAmB,MAAnB,EACGC,IADH,CACQ,OADR,EAEGC,KAFH,CAES,OAFT,EAEkB,GAFlB,EAEuBJ,KAFvB,EAGGK,IAHH,CAGQ,gBAAQ;AACZ,UAAIC,KAAKC,MAAT,EAAiB;AACf,YAAIX,OAAOY,WAAP,CAAmBP,QAAnB,EAA6BK,KAAK,CAAL,EAAQG,IAArC,CAAJ,EAAgD;AAC9Cd,aAAG,OAAH,EACGO,MADH,CACU,GADV,EAEGE,KAFH,CAES,OAFT,EAEkB,GAFlB,EAEuBJ,KAFvB,EAGGK,IAHH,CAGQ;AAAA,mBAAQP,IAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,KAAK,CAAL,CAArB,CAAR;AAAA,WAHR,EAIGC,KAJH,CAIS;AAAA,mBAASf,IAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,oBAArB,CAAT;AAAA,WAJT;AAKD,SAND,MAMO;AACLb,cAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,oBAArB;AACD;AACF,OAVD,MAUO;AACLb,YAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,oBAArB;AACD;AACF,KAjBH,EAkBGE,KAlBH,CAkBS;AAAA,aAASf,IAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,oBAArB,CAAT;AAAA,KAlBT;AAmBD,GArBc;AAAA,CAAf;;kBAuBejB,M","file":"Signin.js","sourcesContent":["const signin = (db, bcrypt) => (req, res) => {\n  const { email, password } = req.body;\n  db.select(\"email\", \"hash\")\n    .from(\"login\")\n    .where(\"email\", \"=\", email)\n    .then(data => {\n      if (data.length) {\n        if (bcrypt.compareSync(password, data[0].hash)) {\n          db(\"users\")\n            .select(\"*\")\n            .where(\"email\", \"=\", email)\n            .then(user => res.status(200).json(user[0]))\n            .catch(error => res.status(400).json(\"Unable to get user\"));\n        } else {\n          res.status(400).json(\"Wrong credinatials\");\n        }\n      } else {\n        res.status(400).json(\"Wrong credinatials\");\n      }\n    })\n    .catch(error => res.status(400).json(\"Wrong credinatials\"));\n};\n\nexport default signin;\n"]}